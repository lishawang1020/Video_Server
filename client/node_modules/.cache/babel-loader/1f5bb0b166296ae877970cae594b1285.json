{"ast":null,"code":"var _jsxFileName = \"/Users/lisa/Desktop/Github_Profile/Video_Server/client/src/components/Dashboard/Dashboard.js\";\nimport React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport './Dashboard.css';\nimport Navbar from '../Navbar/Navbar';\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n    let shouldRedirect = false;\n\n    if (localStorage.getItem('userTokenTime')) {\n      // Check if user holds token which is valid in accordance to time\n      const data = JSON.parse(localStorage.getItem('userTokenTime'));\n\n      if (new Date().getTime() - data.time > 1 * 60 * 60 * 1000) {\n        // It's been more than hour since you have visited dashboard\n        localStorage.removeItem('userTokenTime');\n        shouldRedirect = true;\n      }\n    } else {\n      shouldRedirect = true;\n    }\n\n    this.state = {\n      redirect: shouldRedirect,\n      videoList: []\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('userTokenTime')) {\n      axios.get('http://127.0.0.1:3333/api/videoList', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n        }\n      }).then(res => {\n        this.setState({\n          videoList: res.data\n        });\n      });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/signIn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 37\n      }\n    });\n    const videos = this.state.videoList.map(video => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"video col-xs-12 col-sm-12 col-md-3 col-lg-4\",\n        key: video._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: '/video/' + video.upload_title,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"video-thumbnail\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: video.thumbnail_path,\n        alt: \"video thubmnail\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"username\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: '/api/videos/' + video.upload_title,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }\n      }, video.uploader_name)), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"video-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }\n      }, video.upload_title.replace(/_/g, ' ')));\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, \"Videos\"), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"my-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"streams row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }, videos)));\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/lisa/Desktop/Github_Profile/Video_Server/client/src/components/Dashboard/Dashboard.js"],"names":["React","Link","Redirect","axios","Navbar","Dashboard","Component","constructor","props","shouldRedirect","localStorage","getItem","data","JSON","parse","Date","getTime","time","removeItem","state","redirect","videoList","componentDidMount","get","headers","token","then","res","setState","render","videos","map","video","_id","upload_title","thumbnail_path","uploader_name","replace"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\n\nimport './Dashboard.css';\nimport Navbar from '../Navbar/Navbar';\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    let shouldRedirect = false;\n    if (localStorage.getItem('userTokenTime')) {\n      // Check if user holds token which is valid in accordance to time\n      const data = JSON.parse(localStorage.getItem('userTokenTime'));\n      if (new Date().getTime() - data.time > (1 * 60 * 60 * 1000)) {\n        // It's been more than hour since you have visited dashboard\n        localStorage.removeItem('userTokenTime');\n        shouldRedirect = true;\n      }\n    } else {\n      shouldRedirect = true;\n    }\n\n    this.state = {\n      redirect: shouldRedirect,\n      videoList: []\n    }\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('userTokenTime')) {\n      axios.get('http://127.0.0.1:3333/api/videoList', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n        }\n      }).then(res => {\n        this.setState({\n          videoList: res.data\n        });\n      });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) return <Redirect to=\"/signIn\" />\n\n    const videos = this.state.videoList.map(video => {\n      return (\n        <div className=\"video col-xs-12 col-sm-12 col-md-3 col-lg-4\" key={video._id}>\n          <Link to={'/video/' + video.upload_title}>\n            <div className=\"video-thumbnail\">\n              <img src={video.thumbnail_path} alt=\"video thubmnail\" />\n            </div>\n          </Link>\n          <span className=\"username\">\n            <Link to={'/api/videos/' + video.upload_title}>\n              {video.uploader_name}\n            </Link>\n          </span>\n          <span className=\"video-title\">{video.upload_title.replace(/_/g, ' ')}</span>\n        </div>\n      );\n    });\n\n    return (\n      <React.Fragment>\n        <Navbar />\n        <div className=\"container mt-5\">\n          <h4>Videos</h4>\n          <hr className=\"my-4\" />\n\n          <div className=\"streams row\">\n            {videos}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}